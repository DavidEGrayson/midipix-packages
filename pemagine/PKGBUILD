pkgname=pemagine
pkgver=r31.94dff95
pkgrel=1
pkgdesc='A (virtual) tour into portable bits and executable bytes.'
arch=('midipix64')
url='http://git.midipix.org/cgit.cgi/${midipix_internal}/${pkgname}'
license=('GPLv2' 'GPLv3')
depends=()
if [ -z "$CROSS" ]; then
  makedepends=('psxtypes')
fi
checkdepends=()
optdepends=()
source=("git://midipix.org/${midipix_internal}/${pkgname}")
sha256sums=('SKIP')

pkgver() {
  cd "${srcdir}/${pkgname}"
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
  rm -rf "build-${CHOST}"
  mkdir "build-${CHOST}"
  cd "build-${CHOST}"
  "${srcdir}/${pkgname}/configure" --debug --host="${CHOST}"
  make
}

package() {
  cd "${srcdir}/build-${CHOST}"
  make DESTDIR="${pkgdir}" install

  # TODO: install license too
}
